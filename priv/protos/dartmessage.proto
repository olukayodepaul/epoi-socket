syntax = "proto3";

package dartmessaging;

// Global broadcast: user awareness (online/offline/away/dnd)
message Awareness {
  string from = 1;                    // eid/device_identity_key, e.g. "alice@domain.com/phone"
  int64 last_seen = 2;                // Unix timestamp
  string status = 3;                  // online, away, dnd, offline
  double latitude = 4;                // Optional: device latitude
  double longitude = 5;               // Optional: device longitude
  int32 awareness_intention = 6;      // 1 = network/device, 2 = owner/user override
}
 // string device_identity_key = 6;    // unique per device

// Peer-specific presence (activities, short-lived states)
message Presence {
  string from = 1;             // Sender (eid/device_id)
  string to = 2;               // Recipient (eid/device_id)
  PresenceType type = 3;       // typing, recording, etc.
  int64 timestamp = 4;         // When the activity started
  double latitude = 5;         // Optional: device latitude
  double longitude = 6;        // Optional: device longitude
}

enum PresenceType {
  TYPING = 0;      // User is typing
  RECORDING = 1;   // User is recording audio
  REACTING = 2;    // User is reacting (emoji, etc.)
  VIEWING = 3;     // User is viewing a message
}


message PresenceRequest {
  Awareness awareness = 1;
  Presence presence = 2;  
}
